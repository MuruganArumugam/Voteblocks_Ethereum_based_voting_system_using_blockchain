_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{DTHg:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return n("yk4J")}])},yk4J:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),s=n("20a2"),c=n("nGE6"),a=n("q1tI"),i=n("hdTg"),o=n("o0o1"),u=n.n(o),l=n("HaE+"),d=n("1OyB"),h=n("vuIU"),j=n("JX7q"),b=n("Ji7U"),f=n("md7G"),g=n("foSv"),p=n("rePB"),O=n("ypdz"),m=n.n(O),v=n("rM4w"),x=n("oZBQ"),w=n("8cHP");function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(g.a)(e);if(t){var s=Object(g.a)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var L=function(e){Object(b.a)(n,e);var t=y(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(p.a)(Object(j.a)(e),"state",{isLogin:!0,email:"",address:""}),Object(p.a)(Object(j.a)(e),"switchAuthModeHandler",(function(t){e.setState((function(e){return{isLogin:!e.isLogin}}))})),Object(p.a)(Object(j.a)(e),"submitHandler",function(){var t=Object(l.a)(u.a.mark((function t(n){var r,s,a,i,o,l,d,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,Object(c.getProviders)();case 3:if(r=t.sent,console.log("Providers",r),!e.state.isLogin){t.next=15;break}return s=e.state,a=s.email,i=s.address,t.next=10,Object(c.signIn)("credentials",{redirect:!1,email:a,address:i,person:"user"});case 10:o=t.sent,console.log(o),o.error||(console.log("sdfa"),w.Router.replaceRoute("/profile")),t.next=32;break;case 15:return t.prev=15,l=e.state.email,t.next=19,x.a.eth.getAccounts();case 19:return d=t.sent,console.log(d[0]),console.log(l),t.next=24,v.a.methods.signup(l).send({from:d[0]});case 24:h=t.sent,console.log(h),e.setState({isLogin:!0,email:"",address:""}),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(15),console.log(t.t0);case 32:case"end":return t.stop()}}),t,null,[[15,29]])})));return function(e){return t.apply(this,arguments)}}()),e}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("section",{className:m.a.auth,children:[Object(r.jsx)("h1",{children:this.state.isLogin?"Login":"Sign Up"}),Object(r.jsxs)("form",{onSubmit:this.submitHandler,children:[Object(r.jsxs)("div",{className:m.a.control,children:[Object(r.jsx)("label",{htmlFor:"Address",children:"Your Address"}),Object(r.jsx)("input",{type:"string",value:this.state.address,onChange:function(t){return e.setState({address:t.target.value})},required:!0})]}),Object(r.jsxs)("div",{className:m.a.control,children:[Object(r.jsx)("label",{htmlFor:"email",children:"Your Email"}),Object(r.jsx)("input",{type:"email",id:"email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},required:!0})]}),Object(r.jsxs)("div",{className:m.a.actions,children:[Object(r.jsx)("button",{children:this.state.isLogin?"Login":"Create Account"}),Object(r.jsx)("button",{type:"button",className:m.a.toggle,onClick:this.switchAuthModeHandler,children:this.state.isLogin?"Create new account":"Login with existing account"})]})]})]})}}]),n}(a.Component);t.default=function(){var e=Object(a.useState)(!0),t=e[0],n=e[1],o=Object(s.useRouter)();return Object(a.useEffect)((function(){Object(c.getSession)().then((function(e){e?o.replace("/profile"):n(!1)}))}),[o]),t?Object(r.jsx)("p",{children:"Loading..."}):Object(r.jsx)(i.a,{children:Object(r.jsx)(L,{})})}}},[["DTHg",0,1,2,3,4,5,6,7]]]);